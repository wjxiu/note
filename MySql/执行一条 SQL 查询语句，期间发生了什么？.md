## 执行一条 SQL 查询语句，期间发生了什么？

- 连接器 ：建立连接，身份验证

- 查询缓存：已经在mysql8.0被删除

- 解析sql
  - 词法分析，解析关键词
  - 语法分析，根据词法分析得出的关键词判断语法是否有问题
  - 建立语法树
  
- 执行sql
  - 预处理，检查表名和表字段是否存在，将select \*的\*转为全部字段
  - 优化，对sql语句优化，负责将执行sql的方案确定下来，选择合适的索引
  - 执行，执行器将条件交给存储引擎，存储引擎定位查询到合适的记录后就返回给执行器判断是否符合查询条件，重复此过程，直到没有记录符合查询条件
  
  执行期间（没有binlog的情况）：以更新为例子
  
  - 存储引擎从buffer pool获取数据，如果没有获取，从磁盘加载
  - 为行加锁
  - 将更新前的数据保存到undo log中
  - 更新buffer poll
  - 将更新后的数据保存到redo log的buffer 中
  - 将redo log的buffer 写入到redo log中（默认是立即刷盘）
